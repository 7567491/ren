# 数字人 UI 重构与简化计划

围绕 `doc/design.md` 的极简 Hero + 三栏布局目标，以下任务聚焦于梳理现状、删繁就简、统一交互体验。每项任务以 `[]` 开头，完成后可替换为 `[x]`。

## 阶段 1：现状评估与信息架构

[x] 清点 `frontend/src` 现有视图与组件，输出“保留/下线/合并”列表，避免冗余逻辑继续堆积。
[x] 对照三栏布局草图，梳理当前字段与交互在左中右的归属，并形成 IA 表格（字段来源、去向、依赖）。
[x] 收集团队对旧 UI 的痛点（字段太散、日志难找等），归纳为 3-5 条设计原则，写入 `doc/design.md` 附录。

## 阶段 2：布局与样式重构

[x] 在 `App.vue` 引入新的 3:5:4 CSS Grid，确保桌面端固定三栏，窄屏降级为折叠模式。
[x] 重写 Hero 区样式（单句主标题 + CTA），并与主内容区通过统一的 spacing/token 链接。
[x] 移除旧的多段布局/卡片，保证页面只有 Hero + 三栏主容器两层层级。

## 阶段 3：左栏（系统视图）简化

[x] 将 API Key、任务管理、全局设置合并为单列栈式卡片，统一标题与操作按钮样式。
[x] Refactor 任务列表逻辑：拆分为可复用 `TaskList` 组件，支持状态筛选与 trace id 复制，无需跳转即可预览任务摘要。
[x] 删除历史故事视频相关控件（如镜头/脚本入口），只保留数字人必需的按钮与开关。

## 阶段 4：中栏（输入区）瘦身

[x] 将所有字段收敛为三块折叠面板，默认展开“形象配置”“语音脚本”，高级参数折叠。
[x] 为头像上传、脚本文本等高频区域写独立子组件，统一校验与错误提示，避免多处重复逻辑。
[x] 接入模板/素材快捷填充，但将入口控制在最多 3 个，确保界面简洁。

## 阶段 5：右栏（结果区）清晰化

[x] 改造阶段进度条为横向三节点，节点下直接展示耗时与成本小结，去除冗长表格。
[x] 将日志展示拆分为“最近 5 条 + 展开抽屉”，默认折叠完整日志，避免挤占主视图。
[x] 合并播放器与下载操作：主按钮播放 `/output/...`，右侧仅保留一个“备用 CDN”链接提示。

## 阶段 6：交互联调与验收

[x] 更新 Pinia store，保证左栏任务切换会同步右栏状态，并停止旧轮询。
[x] 运行 `npm run build` 与 `PYTEST_WAVESPEED_MOCK=1 ./run_tests.sh`，确认重构未破坏现有流程。
[x] 在 `doc/工作流.md` 记录新 UI 流程与测试截图，供团队复盘与后续优化参考。
