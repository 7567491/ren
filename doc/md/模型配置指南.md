# 模型配置指南

基于实际测试结果优化的模型选择方案。

---

## 📊 测试数据总结

| 模型 | 类型 | 成功率 | 平均时长 | 成本 | 质量 |
|------|------|--------|---------|------|------|
| **图像生成** |
| FLUX Dev LoRA | T2I | 3/3 ✅ | 22秒 | $0.006 | ⭐⭐⭐ |
| Seedream v4 | T2I | 1/1 ✅ | 14秒 | $0.027 | ⭐⭐⭐⭐ |
| Seedream 4.5 | T2I | 1/1 ✅ | 14秒 | $0.04 | ⭐⭐⭐⭐⭐ (4K) |
| **视频生成** |
| WAN 2.5 I2V | I2V | 1/1 ✅ | 127秒 | $0.30 | ⭐⭐⭐⭐ (720p) |
| WAN 2.6 I2V | I2V | 1/1 ✅ | 171秒 | $0.50 | ⭐⭐⭐⭐⭐ (音频) |
| WAN 2.6 T2V | T2V | 1/1 ✅ | 95秒 | $0.50 | ⭐⭐⭐⭐ (720p) |
| Hailuo 2.3 Pro | I2V | 1/1 ✅ | 87秒 | $0.50 | ⭐⭐⭐⭐⭐ (1080p) |

---

## 🎯 三种推荐方案

### 方案1：性价比方案（默认，推荐）

**适用场景**：预算有限，追求性价比

```python
# 在 ad-aka.py 中配置
USE_DIRECT_T2V = False
CURRENT_IMAGE_MODEL = "seedream-v4"
CURRENT_VIDEO_MODEL = "wan-2.5-i2v"
```

**性能指标**：
- **单镜头成本**：$0.327（图像$0.027 + 视频$0.30）
- **3镜头总成本**：$0.981
- **单镜头时长**：141秒（图像14秒 + 视频127秒）
- **3镜头总时长**：约7分钟
- **质量**：高质量图像 + 720p视频

**优势**：✅ 成本低、✅ 质量好、✅ 稳定性高

---

### 方案2：速度优先方案

**适用场景**：追求最快速度，预算充足

```python
# 在 ad-aka.py 中配置
USE_DIRECT_T2V = True  # 关键：改为 True
CURRENT_IMAGE_MODEL = None  # 自动设置
CURRENT_VIDEO_MODEL = "wan-2.6-t2v"  # 自动设置
```

**性能指标**：
- **单镜头成本**：$0.50
- **3镜头总成本**：$1.50
- **单镜头时长**：95秒（直接T2V）
- **3镜头总时长**：约5分钟
- **质量**：720p视频（无音频）

**优势**：⚡ 最快、⚡ 单步完成、⚡ 流程简单

**劣势**：💰 贵53%、⚠️ 无法预览图像

---

### 方案3：极致成本方案

**适用场景**：严格成本控制

```python
# 在 ad-aka.py 中配置
USE_DIRECT_T2V = False
CURRENT_IMAGE_MODEL = "flux-dev-lora"  # 改为最便宜模型
CURRENT_VIDEO_MODEL = "wan-2.5-i2v"
```

**性能指标**：
- **单镜头成本**：$0.306（图像$0.006 + 视频$0.30）
- **3镜头总成本**：$0.918
- **单镜头时长**：149秒（图像22秒 + 视频127秒）
- **3镜头总时长**：约7.5分钟
- **质量**：中等图像 + 720p视频

**优势**：💰 最便宜

**劣势**：⚠️ 图像质量较低

---

## 🔧 高级配置选项

### 方案4：最高质量方案

**适用场景**：追求极致质量，预算充足

```python
USE_DIRECT_T2V = False
CURRENT_IMAGE_MODEL = "seedream-v4.5"  # 4K图像
CURRENT_VIDEO_MODEL = "hailuo-2.3-pro"  # 1080p视频
```

**性能指标**：
- **单镜头成本**：$0.54
- **3镜头总成本**：$1.62
- **单镜头时长**：101秒（图像14秒 + 视频87秒）
- **质量**：4K图像 + 1080p视频 🏆

---

### 方案5：音频同步方案

**适用场景**：需要音视频同步

```python
USE_DIRECT_T2V = False
CURRENT_IMAGE_MODEL = "seedream-v4"
CURRENT_VIDEO_MODEL = "wan-2.6-i2v"  # 支持音频同步
```

**性能指标**：
- **单镜头成本**：$0.527
- **3镜头总成本**：$1.581
- **单镜头时长**：185秒（图像14秒 + 视频171秒）
- **特性**：原生音视频同步 🎵

---

## 📝 快速切换指南

### 步骤1：打开配置文件

```bash
vim py/ad-aka.py
# 或
nano py/ad-aka.py
```

### 步骤2：找到配置区域

```python
# ============================================================
# 模型选择配置（根据测试结果优化）
# ============================================================
```

### 步骤3：修改配置

**切换到速度优先方案**：
```python
USE_DIRECT_T2V = True  # 改为 True
```

**切换图像模型**：
```python
CURRENT_IMAGE_MODEL = "seedream-v4.5"  # 可选: "flux-dev-lora", "seedream-v4", "seedream-v4.5"
```

**切换视频模型**：
```python
CURRENT_VIDEO_MODEL = "hailuo-2.3-pro"  # 可选: "wan-2.5-i2v", "wan-2.6-i2v", "hailuo-2.3-pro"
```

### 步骤4：运行测试

```bash
./venv/bin/python3 py/ad-aka.py
```

---

## 💡 选择建议

### 首次使用 → **方案1（性价比方案）**
- 成本适中，质量好，最稳定

### 时间紧急 → **方案2（速度优先）**
- 5分钟完成，最快速度

### 预算紧张 → **方案3（极致成本）**
- 最低成本，质量可接受

### 商业用途 → **方案4（最高质量）**
- 4K + 1080p，专业级输出

### 需要配音 → **方案5（音频同步）**
- WAN 2.6 原生音视频支持

---

## 📊 成本对比表

| 方案 | 单镜头成本 | 3镜头成本 | 相对差价 | 时长 |
|------|----------|----------|---------|------|
| 方案1 性价比 | $0.327 | $0.981 | 基准 | 7分钟 |
| 方案2 速度 | $0.500 | $1.500 | +53% | 5分钟 ⚡ |
| 方案3 极致成本 | $0.306 | $0.918 | -6% | 7.5分钟 💰 |
| 方案4 最高质量 | $0.540 | $1.620 | +65% | 5分钟 🏆 |
| 方案5 音频同步 | $0.527 | $1.581 | +61% | 9分钟 🎵 |

---

## ⚠️ 注意事项

### 1. T2V vs I2V 的选择

**I2V（两步流程）优势**：
- ✅ 可以预览和修改图像
- ✅ 稳定性更高（100%测试成功率）
- ✅ 成本更可控

**T2V（直接生成）优势**：
- ⚡ 速度更快（省去图像生成步骤）
- ⚡ 流程更简单

### 2. 模型可用性

- FLUX Dev LoRA：始终可用 ✅
- Seedream v4/v4.5：已测试可用 ✅
- WAN 2.5/2.6：已测试可用 ✅
- Hailuo 2.3 Pro：已测试可用 ✅

### 3. 成本控制建议

1. **先小规模测试**：生成1个镜头验证效果
2. **使用便宜模型预览**：FLUX Dev LoRA快速测试
3. **最终版本用高质量模型**：Seedream 4.5 + Hailuo

---

## 🔍 故障排除

### 问题1：模型配置错误

```
KeyError: 'seedream-v4'
```

**解决**：检查模型名称拼写，确保在 `IMAGE_MODEL_CONFIG` 或 `VIDEO_MODEL_CONFIG` 中定义

### 问题2：I2V 模式但未生成图像

```
AttributeError: 'NoneType' object has no attribute...
```

**解决**：确保 `USE_DIRECT_T2V = False` 且 `CURRENT_IMAGE_MODEL` 不为 None

### 问题3：成本超出预期

**解决**：
1. 检查当前使用的模型配置
2. 查看日志中的成本预估
3. 考虑切换到更便宜的方案

---

## 📚 相关文档

- **测试报告**：`test/test-wave.md`
- **测试数据**：`test/test-wave-results.json`
- **扩展测试**：`test/test-extended-results.json`
- **API文档**：`wavespeed.md`

---

**最后更新**：2025-12-20
**维护者**：Claude Code
**版本**：v2.0
