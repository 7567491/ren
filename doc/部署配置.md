# å‰åç«¯åˆ†ç¦»éƒ¨ç½²é…ç½®æ–‡æ¡£

æœ¬æ–‡æ¡£è®°å½•äº†å°† AI è§†é¢‘ç”Ÿæˆç³»ç»Ÿéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´é…ç½®è¿‡ç¨‹ã€‚

## ğŸ“‹ é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®åç§°**: AI æ•…äº‹åŒ–è§†é¢‘ç”Ÿæˆç³»ç»Ÿ
- **åŸŸå**: wave.linapp.fun
- **æœåŠ¡å™¨IP**: 139.162.52.158
- **åç«¯ç«¯å£**: 18000 (å†…ç½‘)
- **éƒ¨ç½²æ—¶é—´**: 2025-12-27

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚                  https://wave.linapp.fun                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTPS (443)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Nginx åå‘ä»£ç†                          â”‚
â”‚  - é™æ€æ–‡ä»¶æœåŠ¡ (/home/wave/frontend/)                        â”‚
â”‚  - API ä»£ç† (/api/* â†’ 127.0.0.1:18000)                       â”‚
â”‚  - SSL ç»ˆæ­¢ (é€šé…ç¬¦è¯ä¹¦ *.linapp.fun)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTP (127.0.0.1:18000)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI åç«¯æœåŠ¡                           â”‚
â”‚  - æœåŠ¡: wave-api.service (systemd)                          â”‚
â”‚  - è¿›ç¨‹: uvicorn (Python 3.10)                               â”‚
â”‚  - å·¥ä½œç›®å½•: /home/wave                                       â”‚
â”‚  - è™šæ‹Ÿç¯å¢ƒ: /home/wave/venv                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ç›®å½•ç»“æ„

```
/home/wave/
â”œâ”€â”€ frontend/                    # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ py/                         # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ api_server.py          # FastAPI æœåŠ¡å™¨
â”‚   â”œâ”€â”€ ad-back.py             # è§†é¢‘ç”Ÿæˆæ ¸å¿ƒè„šæœ¬
â”‚   â””â”€â”€ services/              # æœåŠ¡æ¨¡å—
â”œâ”€â”€ venv/                       # Python è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ output/                     # è§†é¢‘è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ {job_id}/              # ä»»åŠ¡è¾“å‡ºç›®å½•
â”‚       â”œâ”€â”€ shot_*.mp4         # åˆ†é•œè§†é¢‘
â”‚       â”œâ”€â”€ final_video.mp4    # æœ€ç»ˆè§†é¢‘
â”‚       â””â”€â”€ log.txt            # ä»»åŠ¡æ—¥å¿—
â””â”€â”€ temp/                       # ä¸´æ—¶é…ç½®æ–‡ä»¶

/etc/nginx/sites-available/
â””â”€â”€ wave.linapp.fun             # Nginx é…ç½®æ–‡ä»¶

/etc/systemd/system/
â””â”€â”€ wave-api.service            # Systemd æœåŠ¡é…ç½®

/var/log/
â”œâ”€â”€ wave-api.log                # API æ ‡å‡†æ—¥å¿—
â””â”€â”€ wave-api-error.log          # API é”™è¯¯æ—¥å¿—
```

## âš™ï¸ é…ç½®æ–‡ä»¶è¯¦è§£

### 1. Nginx é…ç½®

**æ–‡ä»¶è·¯å¾„**: `/etc/nginx/sites-available/wave.linapp.fun`

```nginx
# HTTP æœåŠ¡ï¼ˆè‡ªåŠ¨è·³è½¬ HTTPSï¼‰
server {
    listen 80;
    listen [::]:80;
    server_name wave.linapp.fun;

    # ACME challengeï¼ˆè¯ä¹¦ç»­æœŸï¼‰
    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # å…¶ä»–è¯·æ±‚è·³è½¬ HTTPS
    location / {
        return 301 https://$server_name$request_uri;
    }
}

# HTTPS ä¸»æœåŠ¡
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name wave.linapp.fun;

    # SSL è¯ä¹¦ï¼ˆä½¿ç”¨é€šé…ç¬¦è¯ä¹¦ï¼‰
    ssl_certificate /etc/letsencrypt/live/linapp.fun/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/linapp.fun/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /home/wave/frontend;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API ä»£ç†
    location /api/ {
        proxy_pass http://127.0.0.1:18000/api/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;

        # è¶…æ—¶è®¾ç½®ï¼ˆè§†é¢‘ç”Ÿæˆå¯èƒ½è€—æ—¶è¾ƒé•¿ï¼‰
        proxy_connect_timeout 60s;
        proxy_send_timeout 300s;
        proxy_read_timeout 300s;
    }

    # Swagger API æ–‡æ¡£
    location /docs {
        proxy_pass http://127.0.0.1:18000/docs;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # å¥åº·æ£€æŸ¥
    location /health {
        proxy_pass http://127.0.0.1:18000/health;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # è§†é¢‘è¾“å‡ºæ–‡ä»¶ä¸‹è½½
    location /output/ {
        alias /home/wave/output/;
        autoindex off;
        add_header Content-Disposition 'attachment';
        add_header Access-Control-Allow-Origin *;
    }

    # æ–‡ä»¶ä¸Šä¼ é™åˆ¶
    client_max_body_size 500M;
}
```

**é…ç½®è¦ç‚¹**:
- HTTP è‡ªåŠ¨è·³è½¬ HTTPS
- ä½¿ç”¨é€šé…ç¬¦ SSL è¯ä¹¦ `*.linapp.fun`
- API è¶…æ—¶è®¾ç½®ä¸º 300 ç§’ï¼ˆè§†é¢‘ç”Ÿæˆä»»åŠ¡è€—æ—¶è¾ƒé•¿ï¼‰
- æ”¯æŒ 500M æ–‡ä»¶ä¸Šä¼ 

### 2. Systemd æœåŠ¡é…ç½®

**æ–‡ä»¶è·¯å¾„**: `/etc/systemd/system/wave-api.service`

```ini
[Unit]
Description=Wave AI Video Generation API Service
After=network.target

[Service]
Type=simple
User=wave
Group=wave
WorkingDirectory=/home/wave

# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒçš„ Python
Environment="PATH=/home/wave/venv/bin:/usr/local/bin:/usr/bin:/bin"
ExecStart=/home/wave/venv/bin/python3 /home/wave/py/api_server.py

# è‡ªåŠ¨é‡å¯é…ç½®
Restart=always
RestartSec=10

# æ—¥å¿—é…ç½®
StandardOutput=append:/var/log/wave-api.log
StandardError=append:/var/log/wave-api-error.log

# å®‰å…¨é™åˆ¶
PrivateTmp=true
NoNewPrivileges=true

[Install]
WantedBy=multi-user.target
```

**é…ç½®è¦ç‚¹**:
- ä»¥ `wave` ç”¨æˆ·è¿è¡Œ
- ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒçš„ Python
- è¿›ç¨‹å´©æºƒå 10 ç§’è‡ªåŠ¨é‡å¯
- æ—¥å¿—è‡ªåŠ¨è¿½åŠ åˆ°æ–‡ä»¶

### 3. å‰ç«¯ API é…ç½®

**æ–‡ä»¶è·¯å¾„**: `/home/wave/frontend/index.html` (ç¬¬ 426 è¡Œ)

```javascript
const API_BASE = '';  // ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç”± nginx ä»£ç†
```

**è¯´æ˜**: ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ‰€æœ‰ API è¯·æ±‚ç”± Nginx ä»£ç†åˆ°åç«¯ã€‚

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: å‡†å¤‡ Python ç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd /home/wave
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install --upgrade pip
pip install -r requirements.txt
```

### æ­¥éª¤ 2: é…ç½® Nginx

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo nano /etc/nginx/sites-available/wave.linapp.fun
# ç²˜è´´ä¸Šè¿° Nginx é…ç½®

# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/wave.linapp.fun /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl reload nginx
```

### æ­¥éª¤ 3: é…ç½® Systemd æœåŠ¡

```bash
# åˆ›å»ºæœåŠ¡é…ç½®æ–‡ä»¶
sudo nano /etc/systemd/system/wave-api.service
# ç²˜è´´ä¸Šè¿°æœåŠ¡é…ç½®

# åˆ›å»ºæ—¥å¿—æ–‡ä»¶
sudo touch /var/log/wave-api.log /var/log/wave-api-error.log
sudo chown wave:wave /var/log/wave-api*.log

# é‡è½½é…ç½®
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl enable wave-api.service
sudo systemctl start wave-api.service

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status wave-api.service
```

### æ­¥éª¤ 4: ä¿®å¤æ–‡ä»¶æƒé™

```bash
# å…è®¸ Nginx (www-data) è®¿é—® /home/wave ç›®å½•
chmod o+x /home/wave

# è®¾ç½®å‰ç«¯æ–‡ä»¶æƒé™
chmod 644 /home/wave/frontend/index.html
```

### æ­¥éª¤ 5: éªŒè¯éƒ¨ç½²

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥ API
curl https://wave.linapp.fun/health

# æµ‹è¯•å‰ç«¯é¡µé¢
curl -I https://wave.linapp.fun/

# æµ‹è¯• API æ–‡æ¡£
curl -I https://wave.linapp.fun/docs
```

## ğŸ”§ ç®¡ç†å‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status wave-api.service

# å¯åŠ¨æœåŠ¡
sudo systemctl start wave-api.service

# åœæ­¢æœåŠ¡
sudo systemctl stop wave-api.service

# é‡å¯æœåŠ¡
sudo systemctl restart wave-api.service

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo tail -f /var/log/wave-api.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/wave-api-error.log
```

### Nginx ç®¡ç†

```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡è½½é…ç½®ï¼ˆä¸ä¸­æ–­æœåŠ¡ï¼‰
sudo systemctl reload nginx

# é‡å¯ Nginx
sudo systemctl restart nginx

# æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# æŸ¥çœ‹ Nginx è®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/access.log
```

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥å¿—
sudo tail -100 /var/log/wave-api.log

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
sudo tail -f /var/log/wave-api.log

# æœç´¢é”™è¯¯æ—¥å¿—
sudo grep -i "error" /var/log/wave-api-error.log

# æ¸…ç©ºæ—¥å¿—ï¼ˆè°¨æ…æ“ä½œï¼‰
sudo truncate -s 0 /var/log/wave-api.log
```

## ğŸŒ è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **å‰ç«¯é¡µé¢** | https://wave.linapp.fun/ | ä¸»ç•Œé¢ |
| **API æ–‡æ¡£** | https://wave.linapp.fun/docs | Swagger UI |
| **å¥åº·æ£€æŸ¥** | https://wave.linapp.fun/health | æœåŠ¡çŠ¶æ€ |
| **è§†é¢‘ä¸‹è½½** | https://wave.linapp.fun/output/{job_id}/final_video.mp4 | è§†é¢‘æ–‡ä»¶ |

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: å‰ç«¯é¡µé¢ 500 é”™è¯¯

**åŸå› **: Nginx æ— æƒé™è®¿é—® `/home/wave/frontend/`

**è§£å†³æ–¹æ¡ˆ**:
```bash
chmod o+x /home/wave
chmod 644 /home/wave/frontend/index.html
```

### é—®é¢˜ 2: API æ— å“åº”

**æ£€æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status wave-api.service

# 2. æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tuln | grep 18000

# 3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -50 /var/log/wave-api-error.log

# 4. æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•
cd /home/wave
source venv/bin/activate
python3 py/api_server.py
```

### é—®é¢˜ 3: SSL è¯ä¹¦é—®é¢˜

**æ£€æŸ¥è¯ä¹¦**:
```bash
# æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸ
sudo openssl x509 -in /etc/letsencrypt/live/linapp.fun/fullchain.pem -noout -dates

# æŸ¥çœ‹è¯ä¹¦åŸŸå
sudo openssl x509 -in /etc/letsencrypt/live/linapp.fun/fullchain.pem -noout -text | grep -A2 "Subject Alternative Name"
```

### é—®é¢˜ 4: DNS æœªç”Ÿæ•ˆ

**æ£€æŸ¥ DNS**:
```bash
# æµ‹è¯•åŸŸåè§£æ
ping wave.linapp.fun

# æŸ¥çœ‹ DNS è®°å½•
nslookup wave.linapp.fun

# ä½¿ç”¨ dig æŸ¥è¯¢
dig wave.linapp.fun +short
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ç³»ç»Ÿèµ„æºç›‘æ§

```bash
# æŸ¥çœ‹ CPU å’Œå†…å­˜ä½¿ç”¨
htop

# æŸ¥çœ‹åç«¯è¿›ç¨‹èµ„æº
ps aux | grep api_server.py

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h /home/wave/output
```

### API æ€§èƒ½ç›‘æ§

```bash
# æŸ¥çœ‹å¥åº·æ£€æŸ¥å“åº”æ—¶é—´
time curl -s https://wave.linapp.fun/health

# æŸ¥çœ‹æ´»è·ƒä»»åŠ¡æ•°
curl -s https://wave.linapp.fun/health | python3 -m json.tool
```

## ğŸ” å®‰å…¨é…ç½®

### SSL å®‰å…¨æ€§

- âœ… ä½¿ç”¨ TLS 1.2 å’Œ TLS 1.3
- âœ… ç¦ç”¨ä¸å®‰å…¨çš„åŠ å¯†å¥—ä»¶
- âœ… å¯ç”¨ HTTP/2
- âœ… è‡ªåŠ¨ HTTP è·³è½¬ HTTPS

### æœåŠ¡éš”ç¦»

- âœ… ä½¿ç”¨ä¸“ç”¨ç”¨æˆ· `wave` è¿è¡ŒæœåŠ¡
- âœ… å¯ç”¨ `PrivateTmp=true` éš”ç¦»ä¸´æ—¶æ–‡ä»¶
- âœ… å¯ç”¨ `NoNewPrivileges=true` é˜²æ­¢æƒé™æå‡

### æ—¥å¿—å®‰å…¨

- âœ… æ—¥å¿—æ–‡ä»¶ä»… `wave` ç”¨æˆ·å¯å†™
- âœ… API é”™è¯¯æ—¥å¿—ä¸æ ‡å‡†æ—¥å¿—åˆ†ç¦»
- âœ… æ—¥å¿—è‡ªåŠ¨è½®è½¬ï¼ˆå»ºè®®é…ç½® logrotateï¼‰

## ğŸ“ ç»´æŠ¤å»ºè®®

### æ—¥å¸¸ç»´æŠ¤

1. **å®šæœŸæ£€æŸ¥æ—¥å¿—**
   ```bash
   # æ¯å‘¨æ£€æŸ¥é”™è¯¯æ—¥å¿—
   sudo grep -i "error\|critical" /var/log/wave-api-error.log
   ```

2. **ç›‘æ§ç£ç›˜ç©ºé—´**
   ```bash
   # æ¸…ç†è¶…è¿‡ 30 å¤©çš„è§†é¢‘æ–‡ä»¶
   find /home/wave/output -type f -mtime +30 -delete
   ```

3. **æ›´æ–°ä¾èµ–**
   ```bash
   source /home/wave/venv/bin/activate
   pip list --outdated
   ```

### æ—¥å¿—è½®è½¬é…ç½®

åˆ›å»º `/etc/logrotate.d/wave-api`:

```
/var/log/wave-api*.log {
    daily
    rotate 30
    compress
    delaycompress
    notifempty
    create 0640 wave wave
    sharedscripts
    postrotate
        systemctl reload wave-api.service > /dev/null 2>&1 || true
    endscript
}
```

## ğŸ“ˆ æ‰©å±•å»ºè®®

### æ€§èƒ½ä¼˜åŒ–

1. **å¢åŠ å¹¶å‘å¤„ç†**
   - ä¿®æ”¹ `api_server.py` ä¸­çš„ `MAX_CONCURRENT_TASKS`
   - æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´

2. **å¯ç”¨ Nginx ç¼“å­˜**
   ```nginx
   # ç¼“å­˜é™æ€æ–‡ä»¶
   location /static/ {
       expires 7d;
       add_header Cache-Control "public, immutable";
   }
   ```

3. **é…ç½® CDN**
   - å°† `/output/` è§†é¢‘æ–‡ä»¶æ‰˜ç®¡åˆ° CDN
   - å‡å°‘æœåŠ¡å™¨å¸¦å®½å‹åŠ›

### é«˜å¯ç”¨æ€§

1. **é…ç½®å¤‡ä»½**
   ```bash
   # å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶
   sudo tar -czf /backup/wave-config-$(date +%F).tar.gz \
       /etc/nginx/sites-available/wave.linapp.fun \
       /etc/systemd/system/wave-api.service \
       /home/wave/frontend
   ```

2. **ç›‘æ§å‘Šè­¦**
   - ä½¿ç”¨ Prometheus + Grafana ç›‘æ§
   - é…ç½®æœåŠ¡å¼‚å¸¸å‘Šè­¦

## ğŸ”„ æ›´æ–°æµç¨‹

### æ›´æ–°åç«¯ä»£ç 

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
cd /home/wave
git pull

# 2. æ›´æ–°ä¾èµ–
source venv/bin/activate
pip install -r requirements.txt

# 3. é‡å¯æœåŠ¡
sudo systemctl restart wave-api.service

# 4. éªŒè¯
curl https://wave.linapp.fun/health
```

### æ›´æ–°å‰ç«¯ä»£ç 

```bash
# 1. æ›´æ–° HTML æ–‡ä»¶
cp new-index.html /home/wave/frontend/index.html

# 2. æ— éœ€é‡å¯ï¼ˆNginx è‡ªåŠ¨ä½¿ç”¨æ–°æ–‡ä»¶ï¼‰

# 3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æµ‹è¯•
curl -I https://wave.linapp.fun/
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [x] DNS è®°å½•å·²é…ç½®ï¼ˆwave.linapp.fun â†’ 139.162.52.158ï¼‰
- [x] SSL è¯ä¹¦å·²é…ç½®ï¼ˆé€šé…ç¬¦è¯ä¹¦ *.linapp.funï¼‰
- [x] Nginx é…ç½®å·²åˆ›å»ºå¹¶å¯ç”¨
- [x] Python è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»º
- [x] é¡¹ç›®ä¾èµ–å·²å®‰è£…
- [x] Systemd æœåŠ¡å·²é…ç½®
- [x] æœåŠ¡å·²å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯
- [x] æ–‡ä»¶æƒé™å·²æ­£ç¡®è®¾ç½®
- [x] å¥åº·æ£€æŸ¥ API æ­£å¸¸å“åº”
- [x] å‰ç«¯é¡µé¢å¯è®¿é—®
- [x] API æ–‡æ¡£å¯è®¿é—®
- [x] æ—¥å¿—æ–‡ä»¶æ­£å¸¸å†™å…¥

## ğŸ“ ç›¸å…³èµ„æº

- **Nginx å®˜æ–¹æ–‡æ¡£**: https://nginx.org/en/docs/
- **Systemd æœåŠ¡ç®¡ç†**: https://www.freedesktop.org/software/systemd/man/systemd.service.html
- **FastAPI éƒ¨ç½²æŒ‡å—**: https://fastapi.tiangolo.com/deployment/
- **Let's Encrypt**: https://letsencrypt.org/

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-12-27
**æœ€åæ›´æ–°**: 2025-12-27
**ç»´æŠ¤è€…**: Claude Code
