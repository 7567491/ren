# 需求文档 v2.0 - AI视频生成系统（故事化增强版）

## 项目目标
制作**任意主题**的短视频，支持多种视觉风格，通过AI生成连贯的故事性内容，总时长可配置（3-10个镜头，每镜头2-5秒）。

## 核心需求

### 1. 用户交互需求（新增✨）
运行脚本时，用户可以交互式选择：

#### 1.1 视觉风格选择（10种）
- **科技/未来风** - 数据流、全息投影、芯片、未来城市
- **仙侠/东方奇幻** - 飞剑、云海、仙山、法术光效
- **赛博朋克** - 霓虹灯、雨夜都市、机械义体、反乌托邦
- **动画/卡通** - 扁平设计、Q版角色、明亮色彩、夸张表现
- **3D写实** - 真实光影、细腻材质、电影级渲染
- **水墨画风** - 留白意境、墨色晕染、山水写意
- **蒸汽朋克** - 齿轮机械、蒸汽动力、维多利亚时代
- **科幻太空** - 星云、飞船、外星文明、宇宙探索
- **奇幻魔法** - 魔法阵、元素特效、史诗场景
- **电影写实** - 电影质感、景深虚化、自然光影

#### 1.2 镜头数量配置
- 默认：3个镜头
- 可选范围：3-10个镜头
- 影响总时长和故事复杂度

#### 1.3 单镜头时长配置
- 默认：5秒（最终剪辑为3秒）
- 可选范围：3-5秒
- 影响节奏和成本

### 2. 故事连贯性需求（核心改进✨）
#### 2.1 整体故事结构
- **起** - 建立场景和主角/主题
- **承** - 发展情节，展示核心内容
- **转** - 高潮或转折点
- **合** - 结局和升华

#### 2.2 镜头连贯性
- 每个镜头不是独立的，而是故事的一个片段
- 前后镜头要有视觉和叙事的连续性
- 提示词包含：
  - 前一镜头的元素延续
  - 本镜头的核心动作
  - 为下一镜头的铺垫

#### 2.3 风格一致性
- 色彩方案统一
- 光影风格统一
- 镜头运动风格统一
- 视觉元素统一

### 3. 技术栈
- **DeepSeek API** - 生成故事大纲和分镜脚本
- **WavespeedAI API** - 生成图像和视频片段
- **FFmpeg** - 视频合成

## 功能要求（更新）
1. ✅ 启动时显示交互式菜单，选择风格/镜头数/时长
2. ✅ 基于选择生成**完整故事大纲**（起承转合）
3. ✅ 根据故事大纲生成**连贯的分镜脚本**
4. ✅ 每个镜头提示词包含前后连接信息
5. ✅ 生成视频片段（I2V或T2V）
6. ✅ 合成最终视频
7. ✅ 断点续传支持
8. ✅ 并发优化

## 用户体验流程
```
1. 启动脚本
   ↓
2. 显示欢迎界面
   - 请输入视频主题（如：Akamai推出AI推理云）
   - 选择视觉风格（1-10）
   - 设置镜头数量（默认3）
   - 设置镜头时长（默认5秒）
   ↓
3. 生成故事大纲
   - 显示完整故事结构
   - 用户确认
   ↓
4. 生成分镜脚本
   - 显示每个镜头描述
   ↓
5. 生成视频素材
   - 并发生成图像
   - 串行生成视频
   ↓
6. 合成最终视频
   ↓
7. 完成，显示输出路径
```

## 工作目录
所有相关文件放在 `./akamAI` 目录下

## 交付物
- 可执行脚本：`./py/ad-aka.py`
- 最终视频：`./akamAI/final_video.mp4`
- 中间产物：镜头视频片段、音频文件等
